java_headless: "{{ (java_use_headless) | ansible.builtin.ternary('-headless', '') }}"

java_packages:
  Default:  # With Default, the vendor is not important.  You get whatever Java is included in your distro's default repos.
    OpenJDK:
      Alpine:
        packages:
          - "openjdk{{ java_version }}-{{ (java_type == 'jre') | ansible.builtin.ternary('jre'~java_headless, 'jdk') }}"
      Altlinux:
        packages:
          - "java-{{ java_version }}-openjdk-{{ (java_type == 'jre') | ansible.builtin.ternary('headless', 'devel') }}"
      Archlinux:
        packages:
          - "{{ java_type }}{{ java_version }}-openjdk{{ (java_type == 'jre') | ansible.builtin.ternary(java_headless, '') }}"
      Debian:
        packages:
          - "openjdk-{{ java_version }}-{{ java_type }}{{ java_headless }}"
      FreeBSD:
        packages:
          - "openjdk{{ java_version }}{{ (java_type == 'jre') | ansible.builtin.ternary('-jre', '') }}"
      RedHat:
        packages:
          - "java-{{ java_version }}-openjdk-{{ (java_type == 'jdk') | ansible.builtin.ternary('devel', java_headless) }}"
      Suse:
        packages:
          - "java-{{ java_version }}-openjdk-{{ (java_type == 'jdk') | ansible.builtin.ternary('devel', java_headless) }}"
  Azul:
    OpenJDK:  # a.k.a. Zulu
      # https://docs.azul.com/core/install/debian
      Debian:
        repositories:
          - repo_type: deb822
            name: zulu-openjdk
            uris: 'https://repos.azul.com/zulu/deb'
            suites:
              - stable
              - main
            signed_by: 'https://repos.azul.com/azul-repo.key'
        packages:
          - "zulu{{ java_version }}-ca-{{ java_type }}{{ java_headless }}"
      # https://docs.azul.com/core/install/rpm-based-linux
      RedHat:
        repositories:
          - repo_type: yum
            name: zulu-openjdk
            description: zulu-openjdk - Azul Systems Inc., Zulu packages
            baseurl: 'https://repos.azul.com/zulu/rpm'
            gpgkey: 'https://assets.azul.com/files/0xB1998361219BD9C9.txt'
            gpgcheck: true
            protect: true
        packages:
          - "zulu{{ java_version }}-{{ java_type }}{{ java_headless }}"
      # https://docs.azul.com/core/install/rpm-based-linux
      Suse:
        repositories:
          - repo_type: zypper
            name: 'https://cdn.azul.com/zulu/bin/zulu-repo-1.0.0-1.noarch.rpm'
        packages:
          - "zulu{{ java_version }}-{{ java_type }}{{ java_headless }}"
  # https://learn.microsoft.com/en-us/java/openjdk/install
  Microsoft:
    OpenJDK:
      Debian:
        repositories:
          - repo_type: deb822
            name: microsoft-prod
            baseurl: "https://packages.microsoft.com/packages/debian/{{ ansible_facts['distribution_major_version'] }}/prod"
            suites:
              - "{{ ansible_facts['ansible_lsb']['codename'] | default('invalid') }}"
              - main
            signed_by: https://packages.microsoft.com/keys/microsoft.asc
        packages:
          - "msopenjdk-{{ java_version }}"

# For installations that can not be managed by dependency_mgr
java_oracle_arch: "{{ {'x86_64': 'x64'}[ansible_architecture] | default(ansible_architecture) }}"
java_archive_installers:
  # https://www.oracle.com/java/technologies/jdk-script-friendly-urls/
  Oracle:
    GraalVM:
      url: "https://download.oracle.com/graalvm/{{ java_version }}/latest/graalvm-jdk-{{
        java_version }}_{{ ansible_system | lower }}-{{ java_oracle_arch }}_bin.tar.gz"
    Oracle:
      url: "https://download.oracle.com/java/{{ java_version }}/latest/jdk-{{
        java_version }}_{{ ansible_system | lower }}-{{ java_oracle_arch }}_bin.{{
        {'RedHat': 'rpm', 'Debian': 'deb'}[ansible_facts['os_family']] | default('tar.gz') }}"

java_archive_path: "{{ ('/tmp', java_archive_installers[java_vendor][java_variant]['url'] | ansible.builtin.basename) | ansible.builtin.path_join }}"
